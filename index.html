<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VozCheck - Detector de Voz IA Avanzado</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Cargar Supabase ANTES que nuestro script -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>üé§ VozCheck</h1>
                    <span class="version">v2.0</span>
                </div>
                
                <!-- Navegaci√≥n Desktop -->
                <nav class="nav-desktop">
                    <ul id="navMenu">
                        <li><a href="#auth" class="nav-link active" onclick="showSection('auth')">Acceso</a></li>
                    </ul>
                </nav>

                <!-- Men√∫ de opciones -->
                <div class="options-menu" id="optionsMenu" style="display: none;">
                    <button class="options-btn" onclick="toggleOptionsMenu()">‚öôÔ∏è</button>
                    <div class="options-dropdown" id="optionsDropdown">
                        <a href="#" onclick="showProfile()">üë§ Mi Perfil</a>
                        <a href="#" onclick="showAccount()">üîß Mi Cuenta</a>
                        <a href="#" onclick="showSettings()">‚öôÔ∏è Configuraci√≥n</a>
                        <a href="#" onclick="testSupabaseConnection()">üîó Probar Conexi√≥n</a>
                        <a href="#" onclick="logout()">üö™ Cerrar Sesi√≥n</a>
                    </div>
                </div>

                <!-- Bot√≥n men√∫ m√≥vil -->
                <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
            </div>
        </div>

        <!-- Navegaci√≥n m√≥vil -->
        <nav class="nav-mobile" id="mobileNav">
            <ul id="mobileNavMenu">
                <li><a href="#auth" class="nav-link active" onclick="showSection('auth')">Acceso</a></li>
            </ul>
        </nav>
    </header>

    <!-- Contenido Principal -->
    <main class="main">
        <div class="container">
            
            <!-- Pantalla de Autenticaci√≥n -->
            <section id="auth" class="pantalla">
                <div class="auth-container">
                    <div class="auth-header">
                        <h2>üîê Acceso a VozCheck</h2>
                        <p>Inicia sesi√≥n o crea una cuenta para comenzar</p>
                    </div>

                    <form id="authForm" class="auth-form">
                        <div class="form-group">
                            <label for="authEmail">üìß Correo Electr√≥nico</label>
                            <input type="email" id="authEmail" placeholder="tu@email.com" required>
                        </div>

                        <div class="form-group">
                            <label for="authPassword">üîí Contrase√±a</label>
                            <div class="password-input">
                                <input type="password" id="authPassword" placeholder="Tu contrase√±a" required>
                                <button type="button" class="password-toggle" onclick="togglePasswordVisibility()">
                                    <span id="passwordToggleIcon">üëÅÔ∏è</span>
                                </button>
                            </div>
                        </div>

                        <div class="auth-buttons">
                            <button type="button" class="btn btn-primary" onclick="loginEmail()">
                                üöÄ Iniciar Sesi√≥n
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="registerEmail()">
                                ‚ú® Crear Cuenta
                            </button>
                        </div>

                        <div class="auth-divider">
                            <span>o contin√∫a con</span>
                        </div>

                        <div class="social-buttons">
                            <button type="button" class="btn btn-google" onclick="loginGoogle()">
                                üî¥ Google
                            </button>
                            <button type="button" class="btn btn-facebook" onclick="loginFacebook()">
                                üîµ Facebook
                            </button>
                        </div>

                        <div id="authStatus" class="auth-status"></div>
                    </form>
                </div>
            </section>

            <!-- Pantalla de Perfil -->
            <section id="perfil" class="pantalla oculto">
                <div class="profile-container">
                    <div class="profile-header">
                        <h2>üë§ Mi Perfil</h2>
                        <p>Completa tu informaci√≥n para acceder a todas las funciones</p>
                    </div>

                    <form class="profile-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nombreCompleto">üë§ Nombre Completo *</label>
                                <input type="text" id="nombreCompleto" placeholder="Tu nombre completo" required>
                            </div>
                            <div class="form-group">
                                <label for="correoUsuario">üìß Correo Electr√≥nico *</label>
                                <input type="email" id="correoUsuario" placeholder="tu@email.com" readonly>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="telefono">üì± Tel√©fono</label>
                                <input type="tel" id="telefono" placeholder="1234567890" maxlength="10">
                            </div>
                            <div class="form-group">
                                <label for="tipoUsuario">üéØ Tipo de Usuario *</label>
                                <select id="tipoUsuario" required>
                                    <option value="">Selecciona...</option>
                                    <option value="investigador">üî¨ Investigador</option>
                                    <option value="periodista">üì∞ Periodista</option>
                                    <option value="empresa">üè¢ Empresa</option>
                                    <option value="estudiante">üéì Estudiante</option>
                                    <option value="particular">üë§ Particular</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="preferenciaAnalisis">‚öôÔ∏è Preferencia de An√°lisis</label>
                            <select id="preferenciaAnalisis">
                                <option value="basico">üîç B√°sico</option>
                                <option value="avanzado">üß† Avanzado</option>
                                <option value="experto">üéØ Experto</option>
                            </select>
                        </div>

                        <div class="form-section">
                            <h3>üîî Notificaciones</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="notifEmail" checked>
                                    <span class="checkmark"></span>
                                    üìß Notificaciones por email
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="notifResultados">
                                    <span class="checkmark"></span>
                                    üìä Resultados de an√°lisis
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="notifActualizaciones">
                                    <span class="checkmark"></span>
                                    üîÑ Actualizaciones del sistema
                                </label>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="btnGuardarPerfil" class="btn btn-primary" onclick="guardarPerfil()">
                                üíæ Guardar Perfil
                            </button>
                            <button type="button" id="btnEditarPerfil" class="btn btn-secondary" onclick="editarPerfil()" style="display: none;">
                                ‚úèÔ∏è Editar Perfil
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Pantalla de An√°lisis -->
            <section id="analisis" class="pantalla oculto">
                <div class="analysis-container">
                    <div class="section-header">
                        <h2>üé§ An√°lisis de Voz</h2>
                        <p>Analiza archivos de audio o graba directamente para detectar voces generadas por IA</p>
                    </div>

                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchTab('archivo')">üìÅ Archivo</button>
                        <button class="tab-btn" onclick="switchTab('microfono')">üéôÔ∏è Micr√≥fono</button>
                    </div>

                    <!-- Tab de Archivo -->
                    <div id="archivoTab" class="tab-content active">
                        <div class="upload-section">
                            <div class="file-upload">
                                <label for="archivoAudio" class="file-label">
                                    <div class="file-icon">üìé</div>
                                    <div class="file-text">
                                        <strong>Seleccionar archivo de audio</strong>
                                        <span>MP3, WAV (m√°x. 50MB)</span>
                                    </div>
                                </label>
                                <input type="file" id="archivoAudio" accept=".mp3,.wav,audio/*" hidden>
                                <div id="archivoAudioStatus" class="file-status"></div>
                            </div>
                            <button class="btn btn-primary" onclick="iniciarAnalisis()">
                                üîç Analizar Audio
                            </button>
                        </div>
                    </div>

                    <!-- Tab de Micr√≥fono -->
                    <div id="microfonoTab" class="tab-content">
                        <div class="recording-section">
                            <div class="recording-controls">
                                <button id="startRecordBtn" class="btn btn-record" onclick="iniciarMicrofono()">
                                    üéôÔ∏è Iniciar Grabaci√≥n
                                </button>
                                <button id="stopRecordBtn" class="btn btn-stop" onclick="detenerMicrofono()" style="display: none;">
                                    ‚èπÔ∏è Detener
                                </button>
                            </div>

                            <div id="recordingTimer" class="recording-timer" style="display: none;">
                                <div class="timer-display">
                                    <span id="cronometro">00:00</span>
                                </div>
                                <div class="progress-bar">
                                    <div id="recordingProgress" class="progress-fill"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contenedor de Visualizaci√≥n -->
                    <div id="visualizationContainer" class="visualization-container" style="display: none;">
                        <div class="visualization-grid">
                            <div class="canvas-container">
                                <h4>üìä Forma de Onda</h4>
                                <canvas id="waveformCanvas" width="600" height="200" onclick="expandCanvas('waveformCanvas')"></canvas>
                            </div>
                            <div class="canvas-container">
                                <h4>üåà Espectro de Frecuencias</h4>
                                <canvas id="spectrumCanvas" width="600" height="200" onclick="expandCanvas('spectrumCanvas')"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Transcripci√≥n -->
                    <div id="transcripcionAnalisis" class="transcription-container" style="display: none;">
                        <h4>üìù Transcripci√≥n del Audio</h4>
                        <div id="transcripcionAnalisisContent" class="transcription-content">
                            Procesando transcripci√≥n...
                        </div>
                    </div>

                    <!-- An√°lisis Individual -->
                    <div id="audioAnalysisIndividual" class="analysis-details" style="display: none;">
                        <h4>üî¨ An√°lisis Detallado</h4>
                        <div class="analysis-grid">
                            <div class="analysis-item">
                                <span class="analysis-label">Frecuencia Fundamental:</span>
                                <span id="fundamentalFreq" class="analysis-value">-</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Amplitud M√°xima:</span>
                                <span id="maxAmplitude" class="analysis-value">-</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Amplitud M√≠nima:</span>
                                <span id="minAmplitude" class="analysis-value">-</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Duraci√≥n Total:</span>
                                <span id="totalDuration" class="analysis-value">-</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Frecuencia Dominante:</span>
                                <span id="dominantFreq" class="analysis-value">-</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Valor RMS:</span>
                                <span id="rmsValue" class="analysis-value">-</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Ciclos por Segundo:</span>
                                <span id="cyclesPerSec" class="analysis-value">-</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Rango Din√°mico:</span>
                                <span id="dynamicRange" class="analysis-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Resultado -->
                    <div id="resultado" class="result-container" style="display: none;">
                        <!-- Los resultados se mostrar√°n aqu√≠ -->
                    </div>
                </div>
            </section>

            <!-- Pantalla de Comparaci√≥n -->
            <section id="comparacion" class="pantalla oculto">
                <div class="comparison-container">
                    <div class="section-header">
                        <h2>üÜö Comparaci√≥n de Audios</h2>
                        <p>Compara dos archivos de audio para an√°lisis detallado</p>
                    </div>

                    <div class="comparison-upload">
                        <div class="upload-pair">
                            <div class="file-upload">
                                <label for="archivoReal" class="file-label real">
                                    <div class="file-icon">üé§</div>
                                    <div class="file-text">
                                        <strong>Audio 1 (Referencia)</strong>
                                        <span>MP3, WAV (m√°x. 50MB)</span>
                                    </div>
                                </label>
                                <input type="file" id="archivoReal" accept=".mp3,.wav,audio/*" hidden>
                                <div id="archivoRealStatus" class="file-status"></div>
                            </div>

                            <div class="vs-divider">üÜö</div>

                            <div class="file-upload">
                                <label for="archivoIA" class="file-label ia">
                                    <div class="file-icon">ü§ñ</div>
                                    <div class="file-text">
                                        <strong>Audio 2 (Comparar)</strong>
                                        <span>MP3, WAV (m√°x. 50MB)</span>
                                    </div>
                                </label>
                                <input type="file" id="archivoIA" accept=".mp3,.wav,audio/*" hidden>
                                <div id="archivoIAStatus" class="file-status"></div>
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="iniciarComparacion()">
                            üîç Iniciar Comparaci√≥n
                        </button>
                    </div>

                    <!-- Detecci√≥n Inteligente -->
                    <div id="aiDetectionResults" class="ai-detection-container" style="display: none;">
                        <h4>üß† Detecci√≥n Inteligente de IA</h4>
                        <div class="detection-grid">
                            <div id="audio1Detection" class="detection-item">
                                <h5>Audio 1</h5>
                                <div id="result1" class="detection-result">Analizando...</div>
                                <div class="confidence-bar">
                                    <div id="confidence1" class="confidence-fill"></div>
                                </div>
                                <div id="confidenceText1" class="confidence-text">-</div>
                            </div>
                            <div id="audio2Detection" class="detection-item">
                                <h5>Audio 2</h5>
                                <div id="result2" class="detection-result">Analizando...</div>
                                <div class="confidence-bar">
                                    <div id="confidence2" class="confidence-fill"></div>
                                </div>
                                <div id="confidenceText2" class="confidence-text">-</div>
                            </div>
                        </div>
                        <div id="finalResult" class="comparison-result">
                            Procesando an√°lisis comparativo...
                        </div>
                    </div>

                    <!-- Transcripciones -->
                    <div id="transcripcionComparacion" class="transcription-comparison" style="display: none;">
                        <h4>üìù Transcripciones</h4>
                        <div class="transcription-grid">
                            <div class="transcription-item">
                                <h5>üé§ Audio 1</h5>
                                <div id="transcripcionRealContent" class="transcription-content">
                                    Procesando transcripci√≥n...
                                </div>
                            </div>
                            <div class="transcription-item">
                                <h5>ü§ñ Audio 2</h5>
                                <div id="transcripcionIAContent" class="transcription-content">
                                    Procesando transcripci√≥n...
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Canvas de Comparaci√≥n -->
                    <div id="comparisonCanvasGrid" class="comparison-canvas-grid" style="display: none;">
                        <div class="canvas-container">
                            <h4>üìä Superposici√≥n</h4>
                            <canvas id="overlayCanvas" width="600" height="200" onclick="expandCanvas('overlayCanvas')"></canvas>
                        </div>
                        <div class="canvas-container">
                            <h4>üé§ Audio 1</h4>
                            <canvas id="realCanvas" width="600" height="150" onclick="expandCanvas('realCanvas')"></canvas>
                        </div>
                        <div class="canvas-container">
                            <h4>ü§ñ Audio 2</h4>
                            <canvas id="iaCanvas" width="600" height="150" onclick="expandCanvas('iaCanvas')"></canvas>
                        </div>
                        <div class="canvas-container">
                            <h4>üåà An√°lisis Espectral</h4>
                            <canvas id="spectralCanvas" width="600" height="200" onclick="expandCanvas('spectralCanvas')"></canvas>
                        </div>
                    </div>

                    <!-- An√°lisis Comparativo -->
                    <div id="audioAnalysisComparativo" class="analysis-comparative" style="display: none;">
                        <h4>üî¨ An√°lisis Comparativo</h4>
                        <div class="comparative-grid">
                            <div class="comparative-section">
                                <h5>üé§ Audio 1</h5>
                                <div class="analysis-item">
                                    <span class="analysis-label">Frecuencia Fundamental:</span>
                                    <span id="fundamentalFreqReal" class="analysis-value">-</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Amplitud M√°xima:</span>
                                    <span id="maxAmplitudeReal" class="analysis-value">-</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Valor RMS:</span>
                                    <span id="rmsValueReal" class="analysis-value">-</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Rango Din√°mico:</span>
                                    <span id="dynamicRangeReal" class="analysis-value">-</span>
                                </div>
                            </div>

                            <div class="comparative-section">
                                <h5>ü§ñ Audio 2</h5>
                                <div class="analysis-item">
                                    <span class="analysis-label">Frecuencia Fundamental:</span>
                                    <span id="fundamentalFreqIa" class="analysis-value">-</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Amplitud M√°xima:</span>
                                    <span id="maxAmplitudeIa" class="analysis-value">-</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Valor RMS:</span>
                                    <span id="rmsValueIa" class="analysis-value">-</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Rango Din√°mico:</span>
                                    <span id="dynamicRangeIa" class="analysis-value">-</span>
                                </div>
                            </div>

                            <div class="similarity-section">
                                <h5>üìä Similitudes</h5>
                                <div class="analysis-item">
                                    <span class="analysis-label">Similitud de Frecuencia:</span>
                                    <span id="freqSimilarity" class="analysis-value">-</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Similitud de Amplitud:</span>
                                    <span id="ampSimilarity" class="analysis-value">-</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Similitud General:</span>
                                    <span id="generalSimilarity" class="analysis-value">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pantalla de Entrenamiento -->
            <section id="entrenamientoMic" class="pantalla oculto">
                <div class="training-container">
                    <div class="section-header">
                        <h2>üß† Entrenamiento del Modelo</h2>
                        <p>Mejora la precisi√≥n del detector grabando muestras de voz etiquetadas</p>
                    </div>

                    <!-- Selecci√≥n de Pangramas -->
                    <div class="pangram-selection">
                        <h3>üìù Selecciona un Pangrama</h3>
                        <div class="pangram-tabs">
                            <button class="tab-btn active" onclick="switchPangramTab('espanol')">üá™üá∏ Espa√±ol</button>
                            <button class="tab-btn" onclick="switchPangramTab('ingles')">üá∫üá∏ Ingl√©s</button>
                            <button class="tab-btn" onclick="switchPangramTab('frances')">üá´üá∑ Franc√©s</button>
                        </div>

                        <div id="espanolTab" class="pangram-content active">
                            <div class="pangram-grid">
                                <div class="pangram-item" data-pangram="El veloz murci√©lago hind√∫ com√≠a feliz cardillo y kiwi. La cig√ºe√±a tocaba el saxof√≥n detr√°s del palenque de paja." onclick="selectPangram(this)">
                                    "El veloz murci√©lago hind√∫ com√≠a feliz cardillo y kiwi. La cig√ºe√±a tocaba el saxof√≥n detr√°s del palenque de paja."
                                </div>
                                <div class="pangram-item" data-pangram="Benjam√≠n pidi√≥ una bebida de kiwi y fresa; No√©, sin verg√ºenza, la m√°s exquisita champa√±a del men√∫." onclick="selectPangram(this)">
                                    "Benjam√≠n pidi√≥ una bebida de kiwi y fresa; No√©, sin verg√ºenza, la m√°s exquisita champa√±a del men√∫."
                                </div>
                                <div class="pangram-item" data-pangram="Fabio me exige, sin tapujos, que a√±ada cerveza al whisky." onclick="selectPangram(this)">
                                    "Fabio me exige, sin tapujos, que a√±ada cerveza al whisky."
                                </div>
                                <div class="pangram-item" data-pangram="Jovencillo emponzo√±ado de whisky, ¬°qu√© figurota exhibe!" onclick="selectPangram(this)">
                                    "Jovencillo emponzo√±ado de whisky, ¬°qu√© figurota exhibe!"
                                </div>
                            </div>
                        </div>

                        <div id="inglesTab" class="pangram-content">
                            <div class="pangram-grid">
                                <div class="pangram-item" data-pangram="The quick brown fox jumps over the lazy dog." onclick="selectPangram(this)">
                                    "The quick brown fox jumps over the lazy dog."
                                </div>
                                <div class="pangram-item" data-pangram="Pack my box with five dozen liquor jugs." onclick="selectPangram(this)">
                                    "Pack my box with five dozen liquor jugs."
                                </div>
                                <div class="pangram-item" data-pangram="Waltz, bad nymph, for quick jigs vex." onclick="selectPangram(this)">
                                    "Waltz, bad nymph, for quick jigs vex."
                                </div>
                                <div class="pangram-item" data-pangram="Sphinx of black quartz, judge my vow." onclick="selectPangram(this)">
                                    "Sphinx of black quartz, judge my vow."
                                </div>
                            </div>
                        </div>

                        <div id="francesTab" class="pangram-content">
                            <div class="pangram-grid">
                                <div class="pangram-item" data-pangram="Portez ce vieux whisky au juge blond qui fume." onclick="selectPangram(this)">
                                    "Portez ce vieux whisky au juge blond qui fume."
                                </div>
                                <div class="pangram-item" data-pangram="Voix ambigu√´ d'un c≈ìur qui au z√©phyr pr√©f√®re les jattes de kiwi." onclick="selectPangram(this)">
                                    "Voix ambigu√´ d'un c≈ìur qui au z√©phyr pr√©f√®re les jattes de kiwi."
                                </div>
                                <div class="pangram-item" data-pangram="Buvez de ce whisky que le patron juge fameux." onclick="selectPangram(this)">
                                    "Buvez de ce whisky que le patron juge fameux."
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pangrama Seleccionado -->
                    <div id="selectedPangram" class="selected-pangram" style="display: none;">
                        <h4>üìù Pangrama Seleccionado:</h4>
                        <div id="pangramDisplay" class="pangram-display"></div>
                    </div>

                    <!-- Grabaci√≥n de Entrenamiento -->
                    <div id="trainingRecording" class="training-recording" style="display: none;">
                        <div class="recording-controls">
                            <button id="startTrainingBtn" class="btn btn-record" onclick="iniciarGrabacionEtiquetada('real')">
                                üéôÔ∏è Iniciar Grabaci√≥n
                            </button>
                            <button id="stopTrainingBtn" class="btn btn-stop" onclick="detenerGrabacionEtiquetada()" style="display: none;">
                                ‚èπÔ∏è Detener Grabaci√≥n
                            </button>
                        </div>

                        <!-- Timer de Entrenamiento -->
                        <div id="trainingTimer" class="training-timer" style="display: none;">
                            <div class="timer-linear">
                                <span id="timerLinear">00:00</span>
                                <div class="progress-container">
                                    <div id="progressBar" class="progress-bar-fill"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Visualizaci√≥n de Grabaci√≥n -->
                        <div id="recordingVisualization" class="recording-visualization" style="display: none;">
                            <h4>üìä Visualizaci√≥n en Tiempo Real</h4>
                            <canvas id="recordingCanvas" width="600" height="150"></canvas>
                        </div>

                        <!-- Estado del Entrenamiento -->
                        <div id="estadoEntrenamiento" class="training-status"></div>
                    </div>
                </div>
            </section>

            <!-- Pantalla de Configuraci√≥n -->
            <section id="configuracion" class="pantalla oculto">
                <div class="config-container">
                    <div class="section-header">
                        <h2>‚öôÔ∏è Configuraci√≥n</h2>
                        <p>Personaliza la apariencia y comportamiento de VozCheck</p>
                    </div>

                    <div class="config-sections">
                        <!-- Tema -->
                        <div class="config-section">
                            <h3>üé® Apariencia</h3>
                            <div class="config-item">
                                <label for="themeSelector">Tema:</label>
                                <select id="themeSelector" onchange="changeTheme()">
                                    <option value="dark">üåô Oscuro</option>
                                    <option value="light">‚òÄÔ∏è Claro</option>
                                </select>
                            </div>
                            <div class="config-item">
                                <label for="languageSelector">Idioma:</label>
                                <select id="languageSelector" onchange="changeLanguage()">
                                    <option value="es">üá™üá∏ Espa√±ol</option>
                                    <option value="en">üá∫üá∏ English</option>
                                </select>
                            </div>
                        </div>

                        <!-- Colores de Gr√°ficos -->
                        <div class="config-section">
                            <h3>üé® Colores de Gr√°ficos</h3>
                            <div class="color-config">
                                <div class="color-item">
                                    <label for="graphColorReal">üé§ Voz Real:</label>
                                    <input type="color" id="graphColorReal" value="#4A90E2" onchange="updateGraphColors()">
                                    <div id="realPreview" class="color-preview"></div>
                                </div>
                                <div class="color-item">
                                    <label for="graphColorIA">ü§ñ Voz IA:</label>
                                    <input type="color" id="graphColorIA" value="#E74C3C" onchange="updateGraphColors()">
                                    <div id="iaPreview" class="color-preview"></div>
                                </div>
                                <div class="color-item">
                                    <label for="graphColorGeneral">‚ö° General:</label>
                                    <input type="color" id="graphColorGeneral" value="#00FFE0" onchange="updateGraphColors()">
                                    <div id="generalPreview" class="color-preview"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Acciones -->
                        <div class="config-actions">
                            <button class="btn btn-primary" onclick="saveConfiguration()">
                                üíæ Guardar Configuraci√≥n
                            </button>
                            <button class="btn btn-secondary" onclick="resetConfiguration()">
                                üîÑ Restablecer
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pantalla de Conexi√≥n -->
            <section id="conexion" class="pantalla oculto">
                <div class="connection-container">
                    <div class="section-header">
                        <h2>üîó Prueba de Conexi√≥n Supabase</h2>
                        <p>Verifica que la integraci√≥n con Supabase est√© funcionando correctamente</p>
                    </div>

                    <div class="connection-tests">
                        <!-- Informaci√≥n del Sistema -->
                        <div class="test-section">
                            <h3>üìä Informaci√≥n del Sistema</h3>
                            <div class="system-info">
                                <div class="info-item">
                                    <span class="info-label">URL de Supabase:</span>
                                    <span id="supabaseUrl" class="info-value">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Estado del Cliente:</span>
                                    <span id="clientStatus" class="info-value">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Usuario Actual:</span>
                                    <span id="currentUser" class="info-value">-</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">√öltima Prueba:</span>
                                    <span id="lastTest" class="info-value">-</span>
                                </div>
                            </div>
                        </div>

                        <!-- Pruebas de Conexi√≥n -->
                        <div class="test-section">
                            <h3>üîç Pruebas de Conexi√≥n</h3>
                            
                            <div class="test-item">
                                <h4>üåê Conexi√≥n General</h4>
                                <div id="connectionStatus" class="test-status">
                                    <div class="test-info">Haz clic en "Probar Conexi√≥n" para verificar</div>
                                </div>
                            </div>

                            <div class="test-item">
                                <h4>üîê Autenticaci√≥n</h4>
                                <div id="authTestStatus" class="test-status">
                                    <div class="test-info">Estado de autenticaci√≥n se mostrar√° aqu√≠</div>
                                </div>
                            </div>

                            <div class="test-item">
                                <h4>üíæ Base de Datos</h4>
                                <div id="dbTestStatus" class="test-status">
                                    <div class="test-info">Pruebas de base de datos se mostrar√°n aqu√≠</div>
                                </div>
                            </div>
                        </div>

                        <!-- Botones de Prueba -->
                        <div class="test-actions">
                            <button class="btn btn-primary" onclick="testSupabaseConnection()">
                                üîç Probar Conexi√≥n
                            </button>
                            <button class="btn btn-secondary" onclick="testDatabaseOperations()">
                                üíæ Probar Base de Datos
                            </button>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Modal para Canvas Expandido -->
    <div id="canvasModal" class="modal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close" onclick="closeModal()">&times;</span>
            <canvas id="expandedCanvas"></canvas>
        </div>
    </div>

    <!-- Script principal -->
    <script src="script.js"></script>
</body>
</html>
